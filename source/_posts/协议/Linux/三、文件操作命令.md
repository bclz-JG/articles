
---
title: 三、文件操作命令
date: 2018-05-05 16:56:24
tags: Linux
---
# 3文件操作命令
## 3.1 文件操作【增，删，改，查】
### 3.1.1 新建文件【增】touch
命令：touch 文件名

```
示例：在当前目录创建一个名为aa.txt的文件
touch aa.txt
```

### 3.1.2 删除文件 【删】 rm

```
命令：rm 文件名 （删除文件时询问是否确认删除）
命令：rm -f 文件名 （删除文件时不询问是否确认删除）
```

### 3.1.3 修改文件【改】 vi或vim
#### 【vi编辑器的3种模式】
基本上vi可以分为三种状态，分别是：

1、命令模式（command mode）

2、插入模式（Insert mode）

3、底行模式（last line mode）

各模式的功能区分如下：

**1)命令行模式command mode）：**

控制屏幕光标的移动，字符、字或行的删除，查找，移动复制某区段及进入Insert mode下，或者到 last line mode。

命令行模式下的常用命令：

【1】控制光标移动：↑，↓，j

【2】删除当前行：dd

【3】查找：/要查找的内容

【4】进入编辑模式：敲入 i o a

【5】进入底行模式：敲入:

** 2) 编辑模式（Insert mode）：**

只有在Insert mode下，才可以做文字输入，按「ESC」键可回到命令行模式。

编辑模式下常用命令：

【1】ESC 退出编辑模式到命令行模式；

**3) 底行模式（last line mode）：**

将文件保存或退出vi，也可以设置编辑环境，如寻找字符串、列出行号……等。

底行模式下常用命令：

【1】退出编辑：     :q

【2】强制退出：     :q!

【3】保存并退出：  :wq

#### 打开文件


```
命令：vi 文件名
示例：打开当前目录下的aa.txt文件 
vi aa.txt 或者 vim aa.txt

*注意：使用vi编辑器打开文件后，并不能编辑，因为此时处于命令行模式，点击键盘i/a/o进入编辑模式。
```


#### 编辑文件


```
使用vi编辑器打开文件后点击按键：i 、a、o均可进入编辑模式。

i:在光标所在字符前开始插入
a:在光标所在字符后开始插入
o:在光标所在行的下面另起一新行插入

```
#### 保存或者取消编辑

**保存文件：**


```
第一步： ESC   进入命令行模式
第二步：  :    进入底行模式
第三步： wq    保存并退出编辑
```

**取消编辑：**


```
第一步： ESC   进入命令行模式
第二步：  :    进入底行模式
第三步：  q!   撤销本次修改并退出编辑
```

### 3.1.4 文件的查看【查】

文件的查看命令：cat/more/less/tail

#### cat：看最后一屏


```
示例：使用cat查看/etc/sudo.conf文件，只能显示最后一屏内容

cat /etc/sudo.conf
```

#### more：百分比显示


```
示例：使用more查看/etc/sudo.conf文件，可以显示百分比，回车可以向下一行，空格可以向下一页，q可以退出查看

more /etc/sudo.conf
```

#### less：翻页查看


```
示例：使用less查看/etc/sudo.conf文件，可以使用键盘上的PgUp和PgDn向上和向下翻页，q结束查看

less /etc/sudo.conf
```

#### tail：指定行数或者动态查看


```
示例：使用tail -10 查看/etc/sudo.conf文件的后10行，Ctrl+C结束

tail -10 /etc/sudo.conf
```
## 3.2 文件权限
### 3.2.1 权限查看

命令格式：ll [目录]

其中列出来的最左侧有10位字符组成的字符串

例如：-rw-------

其中10位字符对应的格式为：

**【文件类型】【owner权限】【group权限】【others权限】**

第一部分由一位字符来表示文件类型，一共分为三种：

- 其中-表示普通文件
- d表示目录
- l表示链接文件

其后的三个部分都分别由3个字符来表示，其取值分别为rwx或-

r代表可读，w代表可写，x代表该文件是一个可执行文件，如果rwx任意位置变为-则代表不可读或不可写或不可执行文件。

这三个部分分别用于识别不同用户的权限：

- 代表拥有者的权限
- 代表拥有者所在的组，组员的权限
- 代表的是其他用户的权限

自此构成了Linux文件系统中的10位权限识别码

### 3.2.2 权限修改

命令格式：chmod 权限数值 文件

其中权限数值一共有三位，分别对应上述三种不同用户的权限，即格式为xxx，其中各自的取值方式为：

* r 读权限          数值：4
* w 写权限          数值：2
* x 可执行权限      数值：1

三个数值之和，即7表示可读可写可执行，6表示可读可写不可执行，5表示可读可执行不可写...


```
举例：为nginx.conf文件设置以下权限：

* 文件所有者：可读可写可执行
* 文件所在组及其组员：可读可写不可执行
* 其他用户：可读不可写不可执行

 chmod 764 nginx.conf
 
 修改aaa文件夹的权限，权限内容与上述一致
 
 chmod 764 -R aaa
```
### 3.2.3 文件所有者修改

命令格式：chown 用户名 文件


```
举例
将文件 file1.txt 的拥有者设为 runoob，群体的使用者 runoobgroup :

chown runoob:runoobgroup file1.txt

将目前目录下的所有文件与子目录的拥有者皆设为 runoob，群体的使用者 runoobgroup:

chown -R runoob:runoobgroup *
```
